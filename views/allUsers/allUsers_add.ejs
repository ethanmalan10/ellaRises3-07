<main class="container main-content" style="max-width:880px; margin-top:2.5rem;">
  <header style="display:flex; justify-content:space-between; align-items:flex-start; gap:1.25rem; flex-wrap:wrap; margin-bottom:1.5rem;">
    <div>
      <h1 style="margin:0 0 .25rem 0; font-family:var(--font-serif); color:var(--charcoal);">Add Manager</h1>
      <p class="muted" style="margin:0; max-width:520px;">Create a new manager account and optionally link to a participant.</p>
    </div>
    <a class="btn-cream" href="/admin/users" style="padding:12px 18px; border-radius:12px; text-decoration:none; font-weight:600;">Back to Users</a>
  </header>

  <% if (error) { %>
    <div class="alert alert-danger" style="margin-bottom:1rem;"><%= error %></div>
  <% } %>

  <form method="POST" action="/admin/users/add" class="card" style="padding:22px 22px 18px; border-radius:14px; border:1px solid #e7dfcf; background:#f7f3eb;">
    <div style="display:grid; gap:14px; grid-template-columns:repeat(auto-fit, minmax(260px, 1fr)); align-items:center;">
      <div class="form-group" style="grid-column:span 2;">
        <label for="username" style="font-weight:600;">Username (email)</label>
        <input type="text" id="username" name="username" class="form-control" required value="<%= (formData && formData.username) || '' %>" style="margin-top:6px;">
      </div>
      <div class="form-group" style="grid-column:span 2;">
        <label for="password" style="font-weight:600;">Password</label>
        <input type="password" id="password" name="password" class="form-control" required style="margin-top:6px;">
      </div>
      <input type="hidden" name="level" value="m">
      <div class="form-group" style="display:flex; flex-direction:column; gap:6px;">
        <label for="participantid" style="font-weight:600;">Link to Participant (optional)</label>
        <input type="number" id="participantid" name="participantid" class="form-control" placeholder="Participant ID" value="<%= (formData && formData.participantid) || '' %>">
        <small class="muted">Leave blank to create an unlinked manager.</small>
        <a href="/participants/new" class="btn-cream" style="margin-top:6px; padding:8px 10px; border-radius:10px; text-decoration:none; display:inline-block;">Create Participant</a>
      </div>
    </div>

    <div style="display:flex; gap:12px; flex-wrap:wrap; margin-top:18px;">
      <button type="submit" class="btn-gradient" style="padding:12px 16px; border-radius:12px; font-weight:700; min-width:160px;">Create Manager</button>
      <a href="/admin/users" class="btn-cream" style="padding:12px 16px; border-radius:12px; text-decoration:none; font-weight:600;">Cancel</a>
    </div>
  </form>
</main>
