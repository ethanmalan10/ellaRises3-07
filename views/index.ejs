<%
  // Normalize possible names for the donation flash coming from server
  const _donated = (typeof donated !== 'undefined' ? donated : (typeof thanks !== 'undefined' ? thanks : undefined));
  const _donor   = (typeof donor   !== 'undefined' ? donor   : (typeof donorName   !== 'undefined' ? donorName   : ''));
  const _amount  = (typeof amount  !== 'undefined' ? amount  : (typeof donorAmount !== 'undefined' ? donorAmount : ''));
%>

<% if (typeof _donated !== 'undefined' && _donated) { %>
  <div id="donation-toast"
       style="
         position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
         background:#2e2f2e; color:white; padding:14px 18px; border-radius:12px;
         box-shadow:0 8px 24px rgba(0,0,0,.25); z-index:9999; font-weight:600;">
    <%= (_donor && _donor.trim().length) ? _donor : 'Thank you' %>
    donated <%= (_amount && _amount.trim().length) ? `$${_amount}` : '' %> ðŸŽ‰
  </div>
  <script>
    // Auto-hide after 4s and clean query params so it won't reappear on refresh
    setTimeout(() => {
      const t = document.getElementById('donation-toast');
      if (t) t.remove();
      try {
        const url = new URL(window.location.href);
        ['thanks','donated','name','donor','amount','donorName','donorAmount'].forEach(k => url.searchParams.delete(k));
        window.history.replaceState({}, '', url);
      } catch {}
    }, 4000);
  </script>
<% } %>

<%
  // Safely read logged-in user from locals
  const user = locals.currentUser || null;
%>

<main class="main-content">

  <!-- COMPANY TITLE ABOVE HERO -->
  <section class="container" style="margin-top:1.25rem; text-align:center;">
    <h1 style="
      font-family: var(--font-serif);
      font-size: 3rem;
      color: var(--charcoal);
      margin: 0 0 0.75rem 0;
    ">
      Ella Rises
    </h1>
  </section>

  <!-- HERO SECTION -->
  <section class="container hero" style="margin-top:0; border-radius:18px; padding-bottom:20px;">
    <div style="
      position:relative;
      height: 360px;
      border-radius:18px;
      overflow:hidden;
    ">
      <!-- Hero Image -->
      <img
        src="/images/woman.webp"
        alt="Ella Rises Hero"
        style="
          width:100%;
          height:100%;
          object-fit:cover;
          filter: brightness(0.75);
          display:block;
        "
      />

      <!-- Centered Text on Image -->
      <h1 style="
        position:absolute;
        top:50%;
        left:50%;
        transform:translate(-50%, -50%);
        color:#fff;
        font-size:2.2rem;
        text-align:center;
        font-weight:600;
        max-width:90%;
        margin:0;
      ">
        Empowering the rising generation of women
      </h1>
    </div>
  </section>

  <!-- MISSION STATEMENT -->
  <section class="container" style="margin-top:1.25rem;">
    <div class="card" style="padding:28px; border-radius:18px;">
      <h2 style="text-align:center; margin:0 0 10px 0; font-family: var(--font-serif);">
        Our Mission
      </h2>
      <p style="max-width:900px; margin:0 auto; text-align:center;">
        Empowering young women through mentoring, creative workshops, and leadership opportunities.
        We believe in confidence, community, and growthâ€”together.
      </p>
    </div>
  </section>

  <!-- CTA SECTION -->
  <section class="container" style="margin:1.25rem auto 2.25rem;">
    <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(280px,1fr)); gap:22px;">

      <!-- ENROLL CARD -->
      <div class="card" style="padding:28px; border-radius:18px;">
        <h3 style="margin:0 0 10px 0; font-family: var(--font-serif);">Enroll</h3>
        <p style="margin:0 0 16px 0;">
          Join Ella Rises as a participant. Build confidence, skills, and leadership.
        </p>

        <a
          href="<%= user ? '/my-account' : '/register' %>"
          class="btn-login-home"
          style="
            width:100%;
            display:block;
            text-align:center;
            padding:14px 0;
            font-size:1.1rem;
            border-radius: 10px;
          "
        >
          <%= user ? 'Go to My Account' : 'Create Account' %>
        </a>
      </div>

      <!-- DONATIONS CARD -->
      <div class="card" style="padding:28px; border-radius:18px;">
        <h3 style="margin:0 0 10px 0; font-family: var(--font-serif);">Donations</h3>
        <p style="margin:0 0 16px 0;">
          Your generosity fuels mentorships, workshops, and opportunities for our community.
        </p>

        <a
          href="/donations"
          class="btn-login-home"
          style="
            width:100%;
            display:block;
            text-align:center;
            padding:14px 0;
            font-size:1.1rem;
            border-radius: 10px;
          "
        >
          Give Today
        </a>
      </div>

    </div>
  </section>

</main>